From 9461606d60ec47e8464009e800ad934d2e57b0ec Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Wed, 9 Nov 2016 16:42:35 +0100
Subject: [PATCH 10/11] winstorecompat: Remove wassert implementation

It is already provided by mingwex
---
 mingw-w64-libraries/winstorecompat/Makefile.am    |  1 -
 mingw-w64-libraries/winstorecompat/src/_wassert.c | 50 -----------------------
 2 files changed, 51 deletions(-)
 delete mode 100644 mingw-w64-libraries/winstorecompat/src/_wassert.c

diff --git a/mingw-w64-libraries/winstorecompat/Makefile.am b/mingw-w64-libraries/winstorecompat/Makefile.am
index ac69bb7..a30e016 100644
--- a/mingw-w64-libraries/winstorecompat/Makefile.am
+++ b/mingw-w64-libraries/winstorecompat/Makefile.am
@@ -5,7 +5,6 @@ AM_CFLAGS = -Wall -Wstrict-aliasing=2 -pedantic
 lib_LIBRARIES = libwinstorecompat.a
 
 libwinstorecompat_a_SOURCES = \
-  src/_wassert.c \
   src/beginthread.c \
   src/GetModuleHandle.c \
   src/CreateEventW.c \
diff --git a/mingw-w64-libraries/winstorecompat/src/_wassert.c b/mingw-w64-libraries/winstorecompat/src/_wassert.c
deleted file mode 100644
index cd9b3dd..0000000
--- a/mingw-w64-libraries/winstorecompat/src/_wassert.c
+++ /dev/null
@@ -1,50 +0,0 @@
-/*
-    Copyright (c) 2013-2016 mingw-w64 project
-
-    Contributing authors: Rafaël Carré
-
-    Permission is hereby granted, free of charge, to any person obtaining a
-    copy of this software and associated documentation files (the "Software"),
-    to deal in the Software without restriction, including without limitation
-    the rights to use, copy, modify, merge, publish, distribute, sublicense,
-    and/or sell copies of the Software, and to permit persons to whom the
-    Software is furnished to do so, subject to the following conditions:
-
-    The above copyright notice and this permission notice shall be included in
-    all copies or substantial portions of the Software.
-
-    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
-    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
-    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
-    DEALINGS IN THE SOFTWARE.
-*/
-
-#define _wassert ___wassert
-#include <windows.h>
-#include <wchar.h>
-#include <signal.h>
-#undef _wassert
-
-extern int mingw_app_type;
-
-void __cdecl _wassert(const wchar_t *_Message,const wchar_t *_File,unsigned _Line)
-{
-  wchar_t *msgbuf = (wchar_t *) malloc (8192*sizeof(wchar_t));
-
-  if (!_File || _File[0] == 0)
-    _File = L"<unknown>";
-  if (!_Message || _Message[0] == 0)
-    _Message = L"?";
-  _snwprintf (msgbuf, 8191, 
-          L"Assertion failed!\n\nFile: %ws, Line %u\n\nExpression: %ws",
-          _File,_Line, _Message);
-  if (mingw_app_type == 0)
-    fwprintf (stderr, L"%ws\n", msgbuf);
-  else
-    OutputDebugStringW(msgbuf);
-
-  abort ();
-}
-- 
2.9.3

